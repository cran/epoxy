<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Inline Reporting</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Inline Reporting</h1>



<style type="text/css">
.epoxy-output {
border-left: 2px solid var(--bs-primary, #0b535d);
padding: 1em;
margin-bottom: 1.5em;
}
.epoxy-output > :last-child {
margin-bottom: 0;
}
</style>
<p>This vignette is heavily inspired by <a href="https://www.tjmahr.com/">Tristan Mahr</a>’s post <a href="https://www.tjmahr.com/lists-knitr-secret-weapon/"><em>Lists are
my secret weapon for reporting stats with knitr</em></a>. Please read
his original for an excellent introduction on how to better organize
your data for inline reporting scenarios with lists. I’m going to borrow
several examples directly from that post.</p>
<div id="plug-in-reporting" class="section level2">
<h2>Plug-in reporting</h2>
<p>Both Tristan and Yihui Xie call <em>inline reporting</em> the act of
interleaving R expressions in the prose of markdown text. When you click
the <strong>Knit</strong> button or call
<code>rmarkdown::render()</code> to build your report,
<code>knitr</code> evaluates these R expressions, turns them into text
and plugs them into your output.</p>
<p>The most common use case is for reporting descriptive statistics. To
illustrate, I’ll use the <a href="https://rdrr.io/r/datasets/Orange.html"><code>Orange</code>
dataset</a> which contains circumference measurements of 5 orange trees
at 7 points in time.</p>
<p>Here is some R code we might use to summarize the <code>Orange</code>
data:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>n_trees <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">levels</span>(Orange<span class="sc">$</span>Tree))</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>n_timepoints <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(Orange<span class="sc">$</span>age))</span></code></pre></div>
<p>And here are some lines we might include in a report about the growth
of these trees:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>```{r setup, include = FALSE}</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>library(epoxy)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>```</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>```{epoxy}</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>The dataset contains {nrow(Orange)} tree size measurements</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>from {n_trees} trees at {n_timepoints} time points in the study.</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>```</span></code></pre></div>
<div class="epoxy-output">
<p>The dataset contains 35 tree size measurements from 5 trees at 7
timepoints in the study.</p>
</div>
<p>With normal R Markdown <a href="https://bookdown.org/yihui/rmarkdown-cookbook/r-code.html">inline
reporting</a> we would have written this in our <code>.Rmd</code> file
instead:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>The dataset contains `r nrow(Orange)` tree size measurements</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>from `r n_trees` trees at `r n_timepoints` time points in the study.</span></code></pre></div>
<p>The two forms are very similar, but the <code>epoxy</code> chunk
approach provides a few advantages, as we’ll discover in this
vignette.</p>
</div>
<div id="collect-your-variables-in-lists" class="section level2">
<h2>Collect your variables in lists</h2>
<p>In the above example, we used normal variables that were available in
the global environment of our document. But a small structural change
can bring great benefits. It’s worth reading <a href="https://www.tjmahr.com/lists-knitr-secret-weapon/">Tristan’s blog
post</a>, but to steal his thunder: store your data in lists.</p>
<p>We could, on the one hand, create variables named
<code>knitted_when</code>, <code>knitted_where</code> and
<code>knitted_with</code> that all store facts about the knitting
process. The <code>knitted_</code> prefix is helpful as an aid to
remember that these variables are related.</p>
<p>But you could store those three variables in a single object instead.
Bundling everything into a <code>list()</code> allows you to report the
results by accessing the list elements by name with <code>$</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>knitted <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>    <span class="at">when =</span> <span class="fu">format</span>(<span class="fu">Sys.Date</span>()),</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>    <span class="at">where =</span> knitr<span class="sc">::</span><span class="fu">current_input</span>(),</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>    <span class="at">with =</span> <span class="fu">format</span>(utils<span class="sc">::</span><span class="fu">packageVersion</span>(<span class="st">&quot;knitr&quot;</span>)),</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>    <span class="at">doc_url =</span> <span class="st">&quot;https://rdrr.io/pkg/knitr/man/knit.html&quot;</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>```{epoxy}</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>Report prepared on {knitted$when} from `{knitted$where}` </span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>with knitr version {knitted$with} {emo_ji(&#39;happy&#39;)}. </span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>Read more about [`knitr::knit()`]({knitted$doc_url}).</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>```</span></code></pre></div>
<div class="epoxy-output">
<p>Report prepared on 2023-06-11 from <code>inline-reporting.Rmd</code>
with knitr version 1.42 😆. Read more about <a href="https://rdrr.io/pkg/knitr/man/knit.html"><code>knitr::knit()</code></a>.</p>
</div>
<p>This is still essentially equivalent to R Markdown’s inline R chunks.
But <code>epoxy</code> chunks include a <code>data</code> chunk
argument, which allows us to reference items in the <code>knitted</code>
list directly without having to use <code>$</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>```{epoxy knitted-2, data = knitted}</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>Report prepared on {when} from `{where}` </span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>with knitr version {with} {emo_ji(&#39;happy&#39;)}. </span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>Read more about [`knitr::knit()`]({doc_url}).</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>```</span></code></pre></div>
<div class="epoxy-output">
<p>Report prepared on 2023-06-11 from <code>inline-reporting.Rmd</code>
with knitr version 1.42 😆. Read more about <a href="https://rdrr.io/pkg/knitr/man/knit.html"><code>knitr::knit()</code></a>.</p>
</div>
<p>Note that we can still have arbitrary R code in epoxy inline
expressions: the <code>emo_ji()</code> function — a vignette-safe
version of <code>emo::ji()</code> — exists in my global environment.</p>
</div>
<div id="reporting-model-results" class="section level2">
<h2>Reporting Model Results</h2>
<p>Suppose we have some model results that we’ve prepared into a table
(for details, see <a href="https://www.tjmahr.com/lists-knitr-secret-weapon/">Tristan’s blog
post</a>). These results summarize a linear mixed model estimating
population averages for trees grown in several ozone conditions. I’ve
copied the resulting data frame into this vignette to avoid taking extra
dependencies for this vignette.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>text_ready <span class="ot">&lt;-</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>    <span class="fu">data.frame</span>(</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>        <span class="at">term =</span> <span class="fu">c</span>(<span class="st">&quot;intercept&quot;</span>, <span class="st">&quot;hund_days&quot;</span>, <span class="st">&quot;ozone&quot;</span>, <span class="st">&quot;hund_days_ozone&quot;</span>),</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>        <span class="at">estimate =</span> <span class="fu">c</span>(<span class="st">&quot;4.25&quot;</span>, <span class="st">&quot;0.34&quot;</span>, <span class="st">&quot;&amp;minus;0.14&quot;</span>, <span class="st">&quot;&amp;minus;0.04&quot;</span>),</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>        <span class="at">se =</span> <span class="fu">c</span>(<span class="fl">0.131</span>, <span class="fl">0.013</span>, <span class="fl">0.158</span>, <span class="fl">0.015</span>),</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>        <span class="at">ci =</span> <span class="fu">c</span>(<span class="st">&quot;[4.00, 4.51]&quot;</span>, <span class="st">&quot;[0.31, 0.36]&quot;</span>, <span class="st">&quot;[&amp;minus;0.45, 0.17]&quot;</span>,<span class="st">&quot;[&amp;minus;0.07, &amp;minus;0.01]&quot;</span>),</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>        <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>    )</span></code></pre></div>
<p>We can use <code>split()</code> to make a list of data frames that we
can index by the values in the <code>term</code> column.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>stats <span class="ot">&lt;-</span> <span class="fu">split</span>(text_ready, text_ready<span class="sc">$</span>term)</span></code></pre></div>
<p>We now have a list of one-row dataframes:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">str</span>(stats)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co">#&gt; List of 4</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="co">#&gt;  $ hund_days      :&#39;data.frame&#39;: 1 obs. of  4 variables:</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co">#&gt;   ..$ term    : chr &quot;hund_days&quot;</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="co">#&gt;   ..$ estimate: chr &quot;0.34&quot;</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co">#&gt;   ..$ se      : num 0.013</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="co">#&gt;   ..$ ci      : chr &quot;[0.31, 0.36]&quot;</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="co">#&gt;  $ hund_days_ozone:&#39;data.frame&#39;: 1 obs. of  4 variables:</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="co">#&gt;   ..$ term    : chr &quot;hund_days_ozone&quot;</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="co">#&gt;   ..$ estimate: chr &quot;&amp;minus;0.04&quot;</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="co">#&gt;   ..$ se      : num 0.015</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="co">#&gt;   ..$ ci      : chr &quot;[&amp;minus;0.07, &amp;minus;0.01]&quot;</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="co">#&gt;  $ intercept      :&#39;data.frame&#39;: 1 obs. of  4 variables:</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="co">#&gt;   ..$ term    : chr &quot;intercept&quot;</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="co">#&gt;   ..$ estimate: chr &quot;4.25&quot;</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a><span class="co">#&gt;   ..$ se      : num 0.131</span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a><span class="co">#&gt;   ..$ ci      : chr &quot;[4.00, 4.51]&quot;</span></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a><span class="co">#&gt;  $ ozone          :&#39;data.frame&#39;: 1 obs. of  4 variables:</span></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a><span class="co">#&gt;   ..$ term    : chr &quot;ozone&quot;</span></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a><span class="co">#&gt;   ..$ estimate: chr &quot;&amp;minus;0.14&quot;</span></span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a><span class="co">#&gt;   ..$ se      : num 0.158</span></span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a><span class="co">#&gt;   ..$ ci      : chr &quot;[&amp;minus;0.45, 0.17]&quot;</span></span></code></pre></div>
<p>Now we can write up our results with inline reporting:</p>
<pre><code>```{epoxy}
The average log-size in the control condition was
{stats$intercept$estimate} units, 
95% Wald CI {stats$intercept$ci}.
There was not a statistically clear difference between the 
ozone conditions for their intercepts (day-0 values), 
*B* = {stats$ozone$estimate}, {stats$ozone$ci}.
For the control group, the average growth rate was 
{stats$hund_days$estimate} log-size units per 100 days, 
{stats$hund_days$ci}. The growth rate for 
the ozone treatment group was significantly slower, 
*diff* = {stats$hund_days_ozone$estimate}, 
{stats$hund_days_ozone$ci}.
```</code></pre>
<div class="epoxy-output">
<p>The average log-size in the control condition was 4.25 units, 95%
Wald CI [4.00, 4.51]. There was not a statistically clear difference
between the ozone conditions for their intercepts (day-0 values),
<em>B</em> = −0.14, [−0.45, 0.17]. For the control group, the average
growth rate was 0.34 log-size units per 100 days, [0.31, 0.36]. The
growth rate for the ozone treatment group was significantly slower,
<em>diff</em> = −0.04, [−0.07, −0.01].</p>
</div>
<div id="inline-reporting-with-autocomplete" class="section level3">
<h3>Inline reporting with autocomplete</h3>
<p>What’s extra neat about epoxy — and not readily apparent if you’re
reading this vignette — is that RStudio’s autocomplete feature kicks in
when you type <code>stats$</code> inside a braced expression
<code>{ }</code>.</p>
<p>Actually, because the IDE doesn’t know about the <code>epoxy</code>
knitr engine, the autocomplete tries to help out on every word. It’s
typically easy to ignore the suggestions for words that are part of the
prose, and it’s usually outweighed by the usefulness of being able to
autocomplete the names in your data structures.</p>
</div>
<div id="intermittent-inline-reporting" class="section level3">
<h3>Intermittent inline-reporting</h3>
<p>Note that you don’t need to write your entire document or even
paragraph inside an <code>epoxy</code> chunk; you can wrap only the
data-heavy parts as needed.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>There was not a statistically clear difference between the </span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>ozone conditions for their intercepts (day-0 values),</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>```{epoxy}</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>*B* = {stats$ozone$estimate}, {stats$ozone$ci}.</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>```</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>The growth rate for the ozone treatment group was significantly slower,</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>```{epoxy}</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>*diff* = {stats$hund_days_ozone$estimate}, {stats$hund_days_ozone$ci}.</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>```</span></code></pre></div>
<div class="epoxy-output">
<p>There was not a statistically clear difference between the ozone
conditions for their intercepts (day-0 values), <em>B</em> = −0.14,
[−0.45, 0.17]. The growth rate for the ozone treatment group was
significantly slower, <em>diff</em> = −0.04, [−0.07, −0.01].</p>
</div>
</div>
</div>
<div id="repeated-inline-reporting" class="section level2">
<h2>Repeated inline reporting</h2>
<p>Occasionally you may need to re-use the same phrase or document
structure but for different slices of your data.</p>
<div id="vectorized-inline-reporting-chunks" class="section level3">
<h3>Vectorized inline reporting chunks</h3>
<p>Suppose we summarize the orange tree growth (normally I would use a
combination of <code>dplyr::group_by()</code> and
<code>dplyr::summarize()</code> here.)</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>summarize_tree_growth <span class="ot">&lt;-</span> <span class="cf">function</span>(tree) {</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>    tree <span class="ot">&lt;-</span> Orange[Orange<span class="sc">$</span>Tree <span class="sc">==</span> tree, ]</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>    tree <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>        <span class="at">tree =</span> tree<span class="sc">$</span>Tree[<span class="dv">1</span>],</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>        <span class="at">age_range =</span> <span class="fu">diff</span>(<span class="fu">range</span>(tree<span class="sc">$</span>age)),</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>        <span class="at">circumference_first =</span> tree<span class="sc">$</span>circumference[<span class="dv">1</span>],</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>        <span class="at">circumference_last =</span> tree<span class="sc">$</span>circumference[<span class="fu">nrow</span>(tree)]</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>    )</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>    tree<span class="sc">$</span>growth_rate <span class="ot">&lt;-</span> <span class="fu">with</span>(tree, (circumference_last <span class="sc">-</span> circumference_first) <span class="sc">/</span> age_range)</span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>    tree</span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>}</span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a>orange_summary <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, summarize_tree_growth)</span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a>orange_summary <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, orange_summary)</span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a>orange_summary</span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a><span class="co">#&gt;   tree age_range circumference_first circumference_last growth_rate</span></span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a><span class="co">#&gt; 1    1      1464                  30                145  0.07855191</span></span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a><span class="co">#&gt; 2    2      1464                  33                203  0.11612022</span></span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a><span class="co">#&gt; 3    3      1464                  30                140  0.07513661</span></span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a><span class="co">#&gt; 4    4      1464                  32                214  0.12431694</span></span>
<span id="cb12-21"><a href="#cb12-21" tabindex="-1"></a><span class="co">#&gt; 5    5      1464                  30                177  0.10040984</span></span></code></pre></div>
<p><code>epoxy</code> chunks, like <code>glue::glue()</code>, are
vectorized, so if we find ourselves needing to repeat the same thing
over and over again, we can use this feature to our advantage.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>A quick recap of the growth observed in the orange trees:</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>```{epoxy data = orange_summary}</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>- Tree number {tree} started out at {circumference_first}mm and,</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>  over {age_range} days, grew to be {circumference_last}mm.</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>```</span></code></pre></div>
<div class="epoxy-output">
<p>A quick recap of the growth observed in the orange trees:</p>
<ul>
<li>Tree number 1 started out at 30mm and, over 1464 days, grew to be
145mm.</li>
<li>Tree number 2 started out at 33mm and, over 1464 days, grew to be
203mm.</li>
<li>Tree number 3 started out at 30mm and, over 1464 days, grew to be
140mm.</li>
<li>Tree number 4 started out at 32mm and, over 1464 days, grew to be
214mm.</li>
<li>Tree number 5 started out at 30mm and, over 1464 days, grew to be
177mm.</li>
</ul>
</div>
</div>
<div id="template-inline-reporting-chunks" class="section level3">
<h3>Template inline reporting chunks</h3>
<p>By using <a href="https://bookdown.org/yihui/rmarkdown-cookbook/reuse-chunks.html#ref-label">knitr’s
reference labels feature</a>, and the <code>epoxy</code>
<code>data</code> chunk option we saw above, you can create an epoxy
template that you can re-use like a parameterized chunk.</p>
<p>You start by creating a labelled <code>epoxy</code> chunk with
<code>eval = FALSE</code></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>```{epoxy average-growth, eval=FALSE}</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>an average of {signif(growth_rate * 7, 2)}mm per week.</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>```</span></code></pre></div>
<p>that you can later use in your prose by referencing the chunk with
<code>ref.label</code> and providing a different slice of data via the
<code>data</code> chunk option.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>The fourth tree was the largest tree at the end of the study, growing</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>```{epoxy ref.label=&quot;average-growth&quot;, data = summarize_tree_growth(4)}</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>```</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>Meanwhile, the smallest tree was the third, which grew at</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>```{epoxy ref.label=&quot;average-growth&quot;, data = summarize_tree_growth(3)}</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>```</span></code></pre></div>
<div class="epoxy-output">
<p>The fourth tree was the largest tree at the end of the study, growing
an average of 0.87mm per week. Meanwhile, the smallest tree was the
third, which grew at an average of 0.53mm per week.</p>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
